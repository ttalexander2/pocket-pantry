{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar modalResolver_component_1 = require(\"./modalResolver.component\");\n\nvar modal_service_1 = require(\"./modal.service\");\n\nvar ModalPanel = function (_react_1$default$Comp) {\n  _inherits(ModalPanel, _react_1$default$Comp);\n\n  var _super = _createSuper(ModalPanel);\n\n  function ModalPanel() {\n    var _this;\n\n    _classCallCheck(this, ModalPanel);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      components: new Map()\n    };\n\n    _this.hide = function (identifier) {\n      var components = _this.state.components;\n      components.delete(identifier);\n\n      _this.setState({\n        components: components\n      });\n\n      return '';\n    };\n\n    _this.generateUniqueComponentKey = function () {\n      return Math.random().toString(36).substring(2);\n    };\n\n    _this.areThereAnyComponents = function () {\n      return _this.state.components && _this.state.components.size !== 0;\n    };\n\n    _this.renderModal = function (config, index) {\n      return react_1.default.createElement(modalResolver_component_1.ModalResolver, {\n        key: index,\n        visible: true,\n        backdropStyle: config.backdropStyle,\n        onBackdropPress: config.onBackdropPress\n      }, config.element);\n    };\n\n    _this.renderModals = function () {\n      return Array.from(_this.state.components.values()).map(_this.renderModal);\n    };\n\n    return _this;\n  }\n\n  _createClass(ModalPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      modal_service_1.ModalService.mount(this);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      modal_service_1.ModalService.unmount();\n    }\n  }, {\n    key: \"show\",\n    value: function show(element, config) {\n      var key = this.generateUniqueComponentKey();\n      var components = this.state.components.set(key, _objectSpread(_objectSpread({}, config), {}, {\n        element: element\n      }));\n      this.setState({\n        components: components\n      });\n      return key;\n    }\n  }, {\n    key: \"update\",\n    value: function update(identifier, children) {\n      var panelChild = this.state.components.get(identifier);\n\n      if (!panelChild) {\n        return;\n      }\n\n      var childElement = panelChild.element;\n      panelChild.element = react_1.default.cloneElement(childElement, childElement.props, children);\n      var components = this.state.components;\n      components.set(identifier, panelChild);\n      this.forceUpdate();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return react_1.default.createElement(react_native_1.View, {\n        style: styles.container\n      }, this.props.children, this.areThereAnyComponents() && this.renderModals());\n    }\n  }]);\n\n  return ModalPanel;\n}(react_1.default.Component);\n\nexports.ModalPanel = ModalPanel;\nvar styles = react_native_1.StyleSheet.create({\n  container: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["../../../../../src/components/theme/modal/modalPanel.component.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst modalResolver_component_1 = require(\"./modalResolver.component\");\nconst modal_service_1 = require(\"./modal.service\");\nclass ModalPanel extends react_1.default.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            components: new Map(),\n        };\n        this.hide = (identifier) => {\n            const components = this.state.components;\n            components.delete(identifier);\n            this.setState({ components });\n            return '';\n        };\n        this.generateUniqueComponentKey = () => {\n            return Math.random().toString(36).substring(2);\n        };\n        this.areThereAnyComponents = () => {\n            return this.state.components && this.state.components.size !== 0;\n        };\n        this.renderModal = (config, index) => {\n            return (react_1.default.createElement(modalResolver_component_1.ModalResolver, { key: index, visible: true, backdropStyle: config.backdropStyle, onBackdropPress: config.onBackdropPress }, config.element));\n        };\n        this.renderModals = () => {\n            return Array.from(this.state.components.values()).map(this.renderModal);\n        };\n    }\n    componentDidMount() {\n        modal_service_1.ModalService.mount(this);\n    }\n    componentWillUnmount() {\n        modal_service_1.ModalService.unmount();\n    }\n    show(element, config) {\n        const key = this.generateUniqueComponentKey();\n        const components = this.state.components\n            .set(key, { ...config, element });\n        this.setState({ components });\n        return key;\n    }\n    update(identifier, children) {\n        const panelChild = this.state.components.get(identifier);\n        if (!panelChild) {\n            return;\n        }\n        const childElement = panelChild.element;\n        panelChild.element = react_1.default.cloneElement(childElement, childElement.props, children);\n        const components = this.state.components;\n        components.set(identifier, panelChild);\n        this.forceUpdate();\n    }\n    render() {\n        return (react_1.default.createElement(react_native_1.View, { style: styles.container },\n            this.props.children,\n            this.areThereAnyComponents() && this.renderModals()));\n    }\n}\nexports.ModalPanel = ModalPanel;\nconst styles = react_native_1.StyleSheet.create({\n    container: {\n        flex: 1,\n    },\n});\n//# sourceMappingURL=modalPanel.component.js.map"]},"metadata":{},"sourceType":"script"}