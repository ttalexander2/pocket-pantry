{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar devsupport_1 = require(\"../../devsupport\");\n\nvar SEPARATOR = ', ';\n\nvar SelectService = function SelectService() {\n  var _this = this;\n\n  _classCallCheck(this, SelectService);\n\n  this.selectItem = function (multiSelect, descriptor, selected) {\n    if (multiSelect) {\n      return _this.createMultiSelectIndices(descriptor, selected);\n    }\n\n    return descriptor.index;\n  };\n\n  this.toStringSelected = function (selected) {\n    if (!Array.isArray(selected)) {\n      return '';\n    }\n\n    var options = selected.map(function (index) {\n      return \"Option \" + index.toString();\n    });\n    return options.join(SEPARATOR);\n  };\n\n  this.isSelected = function (descriptor, selected) {\n    if (descriptor.multiSelect && _this.isGroup(descriptor)) {\n      return _this.containsSomeFromGroup(descriptor.index, selected);\n    }\n\n    return _this.contains(descriptor.index, selected);\n  };\n\n  this.isDisabled = function (descriptor) {\n    return !descriptor.multiSelect && _this.isGroup(descriptor);\n  };\n\n  this.createDescriptorForElement = function (element, multiSelect, index) {\n    var groupIndices = react_1.default.Children.map(element.props.children, function (child, row) {\n      return new devsupport_1.IndexPath(row, index);\n    });\n    return {\n      multiSelect: multiSelect,\n      groupIndices: groupIndices,\n      index: new devsupport_1.IndexPath(index)\n    };\n  };\n\n  this.createDescriptorForNestedElement = function (element, descriptor, index) {\n    return _objectSpread(_objectSpread({}, descriptor), {}, {\n      index: new devsupport_1.IndexPath(index, descriptor.index.row),\n      groupIndices: []\n    });\n  };\n\n  this.createMultiSelectIndices = function (descriptor, selected) {\n    var isIndexSelected = _this.isSelected(descriptor, selected);\n\n    return !isIndexSelected ? _this.addIndex(descriptor, selected) : _this.removeIndex(descriptor, selected);\n  };\n\n  this.isGroup = function (descriptor) {\n    return descriptor.groupIndices && descriptor.groupIndices.length > 0;\n  };\n\n  this.createGroupIndices = function (descriptor) {\n    return _this.isGroup(descriptor) ? descriptor.groupIndices : [descriptor.index];\n  };\n\n  this.addIndex = function (descriptor, selected) {\n    return [].concat(_toConsumableArray(selected), _toConsumableArray(_this.createGroupIndices(descriptor)));\n  };\n\n  this.removeIndex = function (descriptor, selected) {\n    var groupIndices = _this.createGroupIndices(descriptor);\n\n    return selected.filter(function (selectedIndex) {\n      return !_this.contains(selectedIndex, groupIndices);\n    });\n  };\n\n  this.contains = function (index, selected) {\n    return selected.some(function (selectedIndex) {\n      return selectedIndex.equals(index);\n    });\n  };\n\n  this.containsSomeFromGroup = function (index, selected) {\n    return selected.some(function (selectedIndex) {\n      return selectedIndex.section === index.row;\n    });\n  };\n};\n\nexports.SelectService = SelectService;","map":{"version":3,"sources":["../../../../../src/components/ui/select/select.service.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst devsupport_1 = require(\"../../devsupport\");\nconst SEPARATOR = ', ';\nclass SelectService {\n    constructor() {\n        this.selectItem = (multiSelect, descriptor, selected) => {\n            if (multiSelect) {\n                return this.createMultiSelectIndices(descriptor, selected);\n            }\n            return descriptor.index;\n        };\n        this.toStringSelected = (selected) => {\n            if (!Array.isArray(selected)) {\n                return '';\n            }\n            const options = selected.map((index) => {\n                return `Option ${index.toString()}`;\n            });\n            return options.join(SEPARATOR);\n        };\n        this.isSelected = (descriptor, selected) => {\n            if (descriptor.multiSelect && this.isGroup(descriptor)) {\n                return this.containsSomeFromGroup(descriptor.index, selected);\n            }\n            return this.contains(descriptor.index, selected);\n        };\n        this.isDisabled = (descriptor) => {\n            return !descriptor.multiSelect && this.isGroup(descriptor);\n        };\n        this.createDescriptorForElement = (element, multiSelect, index) => {\n            const groupIndices = react_1.default.Children.map(element.props.children, ((child, row) => {\n                return new devsupport_1.IndexPath(row, index);\n            }));\n            return { multiSelect, groupIndices, index: new devsupport_1.IndexPath(index) };\n        };\n        this.createDescriptorForNestedElement = (element, descriptor, index) => {\n            return {\n                ...descriptor,\n                index: new devsupport_1.IndexPath(index, descriptor.index.row),\n                groupIndices: [],\n            };\n        };\n        this.createMultiSelectIndices = (descriptor, selected) => {\n            const isIndexSelected = this.isSelected(descriptor, selected);\n            return !isIndexSelected ? this.addIndex(descriptor, selected) : this.removeIndex(descriptor, selected);\n        };\n        this.isGroup = (descriptor) => {\n            return descriptor.groupIndices && descriptor.groupIndices.length > 0;\n        };\n        this.createGroupIndices = (descriptor) => {\n            return this.isGroup(descriptor) ? descriptor.groupIndices : [descriptor.index];\n        };\n        this.addIndex = (descriptor, selected) => {\n            return [...selected, ...this.createGroupIndices(descriptor)];\n        };\n        this.removeIndex = (descriptor, selected) => {\n            const groupIndices = this.createGroupIndices(descriptor);\n            return selected.filter((selectedIndex) => {\n                return !this.contains(selectedIndex, groupIndices);\n            });\n        };\n        this.contains = (index, selected) => {\n            return selected.some((selectedIndex) => {\n                return selectedIndex.equals(index);\n            });\n        };\n        this.containsSomeFromGroup = (index, selected) => {\n            return selected.some((selectedIndex) => {\n                return selectedIndex.section === index.row;\n            });\n        };\n    }\n}\nexports.SelectService = SelectService;\n//# sourceMappingURL=select.service.js.map"]},"metadata":{},"sourceType":"script"}