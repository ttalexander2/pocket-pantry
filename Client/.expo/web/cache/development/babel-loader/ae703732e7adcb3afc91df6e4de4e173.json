{"ast":null,"code":"\"use strict\";\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar devsupport_1 = require(\"../../devsupport\");\n\nvar chevronDown_component_1 = require(\"../shared/chevronDown.component\");\n\nvar menuItem_component_1 = require(\"./menuItem.component\");\n\nvar CHEVRON_DEG_COLLAPSED = -180;\nvar CHEVRON_DEG_EXPANDED = 0;\nvar CHEVRON_ANIM_DURATION = 200;\nvar POSITION_OUTSCREEN = devsupport_1.Point.outscreen();\n\nvar MenuGroup = function (_react_1$default$Comp) {\n  _inherits(MenuGroup, _react_1$default$Comp);\n\n  var _super = _createSuper(MenuGroup);\n\n  function MenuGroup() {\n    var _this;\n\n    _classCallCheck(this, MenuGroup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      submenuHeight: 1\n    };\n    _this.expandAnimation = new react_native_1.Animated.Value(0);\n\n    _this.onPress = function () {\n      if (_this.hasSubmenu) {\n        var expandValue = _this.expandAnimationValue > 0 ? 0 : _this.state.submenuHeight;\n\n        _this.createExpandAnimation(expandValue).start();\n      }\n    };\n\n    _this.onSubmenuMeasure = function (frame) {\n      _this.setState({\n        submenuHeight: frame.size.height\n      });\n    };\n\n    _this.createExpandAnimation = function (toValue) {\n      return react_native_1.Animated.timing(_this.expandAnimation, {\n        toValue: toValue,\n        duration: CHEVRON_ANIM_DURATION,\n        useNativeDriver: false\n      });\n    };\n\n    _this.renderAccessoryIfNeeded = function (evaProps) {\n      if (!_this.hasSubmenu) {\n        return null;\n      }\n\n      var style = react_native_1.StyleSheet.flatten(evaProps.style);\n      return react_1.default.createElement(react_native_1.Animated.View, {\n        style: {\n          transform: [{\n            rotate: _this.expandToRotateInterpolation\n          }]\n        }\n      }, react_1.default.createElement(chevronDown_component_1.ChevronDown, _extends({}, evaProps, {\n        fill: style.tintColor\n      })));\n    };\n\n    _this.renderItemsWithDefaultProps = function () {\n      return react_1.default.Children.map(_this.props.children, function (item) {\n        return react_1.default.cloneElement(item, _this.defaultItemProps, null);\n      });\n    };\n\n    _this.renderGroupedItems = function (evaStyle) {\n      return react_1.default.createElement(react_native_1.Animated.View, {\n        style: [styles.submenu, _this.submenuStyle, evaStyle]\n      }, _this.renderItemsWithDefaultProps());\n    };\n\n    _this.renderMeasuringGroupedItems = function (evaStyle) {\n      return react_1.default.createElement(devsupport_1.MeasureElement, {\n        onMeasure: _this.onSubmenuMeasure\n      }, _this.renderGroupedItems(evaStyle));\n    };\n\n    _this.renderGroupedItemsIfNeeded = function (evaStyle) {\n      if (!_this.hasSubmenu) {\n        return null;\n      }\n\n      if (_this.shouldMeasureSubmenu) {\n        return _this.renderMeasuringGroupedItems(evaStyle);\n      }\n\n      return _this.renderGroupedItems(evaStyle);\n    };\n\n    return _this;\n  }\n\n  _createClass(MenuGroup, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          itemProps = _objectWithoutProperties(_this$props, [\"children\"]);\n\n      return react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(menuItem_component_1.MenuItem, _extends({\n        accessoryRight: this.renderAccessoryIfNeeded\n      }, itemProps, {\n        onPress: this.onPress\n      })), this.renderGroupedItemsIfNeeded({}));\n    }\n  }, {\n    key: \"hasSubmenu\",\n    get: function get() {\n      return react_1.default.Children.count(this.props.children) > 0;\n    }\n  }, {\n    key: \"shouldMeasureSubmenu\",\n    get: function get() {\n      return this.state.submenuHeight === 1;\n    }\n  }, {\n    key: \"expandAnimationValue\",\n    get: function get() {\n      return this.expandAnimation._value;\n    }\n  }, {\n    key: \"expandToRotateInterpolation\",\n    get: function get() {\n      return this.expandAnimation.interpolate({\n        inputRange: [-this.state.submenuHeight, CHEVRON_DEG_EXPANDED],\n        outputRange: [CHEVRON_DEG_COLLAPSED + \"deg\", CHEVRON_DEG_EXPANDED + \"deg\"]\n      });\n    }\n  }, {\n    key: \"submenuStyle\",\n    get: function get() {\n      return this.shouldMeasureSubmenu ? styles.outscreen : {\n        height: this.expandAnimation\n      };\n    }\n  }, {\n    key: \"defaultItemProps\",\n    get: function get() {\n      return {\n        appearance: 'grouped'\n      };\n    }\n  }]);\n\n  return MenuGroup;\n}(react_1.default.Component);\n\nexports.MenuGroup = MenuGroup;\nvar styles = react_native_1.StyleSheet.create({\n  outscreen: {\n    position: 'absolute',\n    left: POSITION_OUTSCREEN.x,\n    top: POSITION_OUTSCREEN.y\n  },\n  submenu: {\n    overflow: 'hidden'\n  }\n});","map":{"version":3,"sources":["../../../../../src/components/ui/menu/menuGroup.component.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst devsupport_1 = require(\"../../devsupport\");\nconst chevronDown_component_1 = require(\"../shared/chevronDown.component\");\nconst menuItem_component_1 = require(\"./menuItem.component\");\nconst CHEVRON_DEG_COLLAPSED = -180;\nconst CHEVRON_DEG_EXPANDED = 0;\nconst CHEVRON_ANIM_DURATION = 200;\nconst POSITION_OUTSCREEN = devsupport_1.Point.outscreen();\n/**\n * A group of items displayed in Menu.\n * Groups should be rendered within Menu and contain MenuItem components to provide a useful navigation component.\n *\n * @extends React.Component\n *\n * @property {ReactElement<MenuItemProps> | ReactElement<MenuItemProps>[]} children -\n * Items to be rendered within group.\n *\n * @property {ReactText | (TextProps) => ReactElement} title - String, number or a function component\n * to render within the group.\n * If it is a function, expected to return a Text.\n *\n * @property {(ImageProps) => ReactElement} accessoryLeft - Function component\n * to render to start of the *title*.\n * Expected to return an Image.\n *\n * @property {(ImageProps) => ReactElement} accessoryRight - Function component\n * to render to end of the *title*.\n * Expected to return an Image.\n *\n * @property {TouchableOpacityProps} ...TouchableOpacityProps - Any props applied to TouchableOpacity component.\n *\n * @overview-example MenuGroups\n */\nclass MenuGroup extends react_1.default.Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            submenuHeight: 1,\n        };\n        this.expandAnimation = new react_native_1.Animated.Value(0);\n        this.onPress = () => {\n            if (this.hasSubmenu) {\n                const expandValue = this.expandAnimationValue > 0 ? 0 : this.state.submenuHeight;\n                this.createExpandAnimation(expandValue).start();\n            }\n        };\n        this.onSubmenuMeasure = (frame) => {\n            this.setState({ submenuHeight: frame.size.height });\n        };\n        this.createExpandAnimation = (toValue) => {\n            return react_native_1.Animated.timing(this.expandAnimation, {\n                toValue: toValue,\n                duration: CHEVRON_ANIM_DURATION,\n                useNativeDriver: false,\n            });\n        };\n        this.renderAccessoryIfNeeded = (evaProps) => {\n            if (!this.hasSubmenu) {\n                return null;\n            }\n            const style = react_native_1.StyleSheet.flatten(evaProps.style);\n            return (react_1.default.createElement(react_native_1.Animated.View, { style: { transform: [{ rotate: this.expandToRotateInterpolation }] } },\n                react_1.default.createElement(chevronDown_component_1.ChevronDown, Object.assign({}, evaProps, { fill: style.tintColor }))));\n        };\n        this.renderItemsWithDefaultProps = () => {\n            return react_1.default.Children.map(this.props.children, (item) => {\n                return react_1.default.cloneElement(item, this.defaultItemProps, null);\n            });\n        };\n        this.renderGroupedItems = (evaStyle) => {\n            return (react_1.default.createElement(react_native_1.Animated.View, { style: [styles.submenu, this.submenuStyle, evaStyle] }, this.renderItemsWithDefaultProps()));\n        };\n        this.renderMeasuringGroupedItems = (evaStyle) => {\n            return (react_1.default.createElement(devsupport_1.MeasureElement, { onMeasure: this.onSubmenuMeasure }, this.renderGroupedItems(evaStyle)));\n        };\n        this.renderGroupedItemsIfNeeded = (evaStyle) => {\n            if (!this.hasSubmenu) {\n                return null;\n            }\n            if (this.shouldMeasureSubmenu) {\n                return this.renderMeasuringGroupedItems(evaStyle);\n            }\n            return this.renderGroupedItems(evaStyle);\n        };\n    }\n    get hasSubmenu() {\n        return react_1.default.Children.count(this.props.children) > 0;\n    }\n    get shouldMeasureSubmenu() {\n        return this.state.submenuHeight === 1;\n    }\n    get expandAnimationValue() {\n        // @ts-ignore - private api, but let's us avoid creating animation listeners.\n        // `this.expandAnimation.addListener`\n        return this.expandAnimation._value;\n    }\n    get expandToRotateInterpolation() {\n        return this.expandAnimation.interpolate({\n            inputRange: [-this.state.submenuHeight, CHEVRON_DEG_EXPANDED],\n            outputRange: [`${CHEVRON_DEG_COLLAPSED}deg`, `${CHEVRON_DEG_EXPANDED}deg`],\n        });\n    }\n    get submenuStyle() {\n        // @ts-ignore - issue of `@types/react-native` package\n        return this.shouldMeasureSubmenu ? styles.outscreen : { height: this.expandAnimation };\n    }\n    get defaultItemProps() {\n        return { appearance: 'grouped' };\n    }\n    render() {\n        const { children, ...itemProps } = this.props;\n        return (react_1.default.createElement(react_1.default.Fragment, null,\n            react_1.default.createElement(menuItem_component_1.MenuItem, Object.assign({ accessoryRight: this.renderAccessoryIfNeeded }, itemProps, { onPress: this.onPress })),\n            this.renderGroupedItemsIfNeeded({})));\n    }\n}\nexports.MenuGroup = MenuGroup;\nconst styles = react_native_1.StyleSheet.create({\n    outscreen: {\n        position: 'absolute',\n        left: POSITION_OUTSCREEN.x,\n        top: POSITION_OUTSCREEN.y,\n    },\n    submenu: {\n        overflow: 'hidden',\n    },\n});\n//# sourceMappingURL=menuGroup.component.js.map"]},"metadata":{},"sourceType":"script"}