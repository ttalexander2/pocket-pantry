{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nvar _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar style_service_1 = require(\"./style.service\");\n\nvar SEPARATOR_MAPPING_ENTRY = '.';\nvar DOC_ROOT = 'https://akveo.github.io/react-native-ui-kitten/docs';\n\nvar StyleConsumerService = function () {\n  function StyleConsumerService(name, style) {\n    _classCallCheck(this, StyleConsumerService);\n\n    this.name = name;\n    this.meta = this.safe(style[name], function (generatedConfig) {\n      return generatedConfig.meta;\n    });\n\n    if (!this.meta) {\n      var message = [\"\\n\" + this.name + \": unsupported configuration.\", 'Using UI Kitten components is only possible with configuring ApplicationProvider.', \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/guides/getting-started#manual-installation\", '\\nIn case you have all in place, there might be an incorrect usage of a \"styled\" function.', \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/design-system/custom-component-mapping\"].join('\\n');\n      console.error(message);\n    }\n  }\n\n  _createClass(StyleConsumerService, [{\n    key: \"createDefaultProps\",\n    value: function createDefaultProps() {\n      var appearance = this.getDefaultAppearance();\n      var variants = this.getDefaultVariants();\n      var states = this.getDefaultStates();\n      return _objectSpread(_objectSpread({\n        appearance: appearance\n      }, variants), states);\n    }\n  }, {\n    key: \"createStyleProp\",\n    value: function createStyleProp(source, style, theme, interaction) {\n      var styleInfo = this.getStyleInfo(source, this.withValidInteraction(interaction));\n      var generatedMapping = this.getGeneratedStyleMapping(style, styleInfo);\n\n      if (!generatedMapping) {\n        var message = [this.name + \": unsupported configuration.\", \"Check one of the following prop values: \" + JSON.stringify(styleInfo, null, 2), \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/components/\" + this.name.toLowerCase() + \"/api\"].join('\\n');\n        console.warn(message);\n        return this.createStyleProp(_objectSpread(_objectSpread({}, source), this.createDefaultProps()), style, theme, interaction);\n      }\n\n      var mapping = this.withValidParameters(generatedMapping);\n      return style_service_1.StyleService.createThemedEntry(mapping, theme);\n    }\n  }, {\n    key: \"getGeneratedStyleMapping\",\n    value: function getGeneratedStyleMapping(style, info) {\n      var _this = this;\n\n      return this.safe(style[this.name], function (componentStyles) {\n        var styleKeys = Object.keys(componentStyles.styles);\n\n        var query = _this.findGeneratedQuery(info, styleKeys);\n\n        return componentStyles.styles[query];\n      });\n    }\n  }, {\n    key: \"withValidInteraction\",\n    value: function withValidInteraction(interaction) {\n      var _this2 = this;\n\n      var validInteractions = interaction.filter(function (key) {\n        return Object.keys(_this2.meta.states).includes(key);\n      });\n\n      if (validInteractions.length < interaction.length) {\n        var message = [this.name + \": unsupported configuration.\", \"Check one of the following dispatched interactions: \" + interaction, \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/design-system/custom-component-mapping\"].join('\\n');\n        console.warn(message);\n      }\n\n      return validInteractions;\n    }\n  }, {\n    key: \"withValidParameters\",\n    value: function withValidParameters(mapping) {\n      var _this3 = this;\n\n      var invalidParameters = [];\n      Object.keys(mapping).forEach(function (key) {\n        if (!Object.keys(_this3.meta.parameters).includes(key)) {\n          invalidParameters.push(key);\n          delete mapping[key];\n        }\n      });\n\n      if (invalidParameters.length !== 0) {\n        var message = [this.name + \": unsupported configuration.\", \"Unable to apply \" + invalidParameters, 'There might be an incorrect usage of mapping', \"\\uD83D\\uDCD6 Documentation: \" + DOC_ROOT + \"/design-system/custom-component-mapping\"].join('\\n');\n        console.warn(message);\n      }\n\n      return mapping;\n    }\n  }, {\n    key: \"getStyleInfo\",\n    value: function getStyleInfo(props, interaction) {\n      var variantProps = this.getDerivedVariants(this.meta, props);\n      var stateProps = this.getDerivedStates(this.meta, props);\n      var variants = Object.keys(variantProps).map(function (variant) {\n        return variantProps[variant];\n      });\n      var states = Object.keys(stateProps);\n      return {\n        appearance: props.appearance,\n        variants: variants,\n        states: [].concat(_toConsumableArray(states), _toConsumableArray(interaction))\n      };\n    }\n  }, {\n    key: \"getDefaultAppearance\",\n    value: function getDefaultAppearance() {\n      var _this4 = this;\n\n      var matches = Object.keys(this.meta.appearances).filter(function (appearance) {\n        return _this4.meta.appearances[appearance].default === true;\n      });\n      return matches[matches.length - 1];\n    }\n  }, {\n    key: \"getDefaultVariants\",\n    value: function getDefaultVariants() {\n      return this.transformObject(this.meta.variantGroups, function (variants, group) {\n        return Object.keys(variants[group]).find(function (variant) {\n          return variants[group][variant].default === true;\n        });\n      });\n    }\n  }, {\n    key: \"getDefaultStates\",\n    value: function getDefaultStates() {\n      return this.transformObject(this.meta.states, function (states, state) {\n        var isDefault = states[state].default === true;\n        return isDefault ? isDefault : undefined;\n      });\n    }\n  }, {\n    key: \"getDerivedVariants\",\n    value: function getDerivedVariants(meta, props) {\n      return this.transformObject(props, function (p, prop) {\n        var isVariant = Object.keys(meta.variantGroups).includes(prop);\n        return isVariant ? p[prop] : undefined;\n      });\n    }\n  }, {\n    key: \"getDerivedStates\",\n    value: function getDerivedStates(meta, props) {\n      return this.transformObject(props, function (p, prop) {\n        var isState = Object.keys(meta.states).includes(prop);\n        var isAssigned = p[prop] === true;\n        return isState && isAssigned;\n      });\n    }\n  }, {\n    key: \"transformObject\",\n    value: function transformObject(value, transform) {\n      return Object.keys(value).reduce(function (acc, key) {\n        var nextValue = transform(value, key);\n        return nextValue ? _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, key, nextValue)) : acc;\n      }, {});\n    }\n  }, {\n    key: \"findGeneratedQuery\",\n    value: function findGeneratedQuery(info, source) {\n      var _this5 = this;\n\n      var query = [info.appearance].concat(_toConsumableArray(info.variants), _toConsumableArray(info.states));\n      var matches = source.filter(function (key) {\n        var keyQuery = key.split(SEPARATOR_MAPPING_ENTRY);\n        return _this5.compareArrays(query, keyQuery);\n      });\n      return matches[0];\n    }\n  }, {\n    key: \"compareArrays\",\n    value: function compareArrays(lhs, rhs) {\n      if (lhs.length !== rhs.length) {\n        return false;\n      }\n\n      return lhs.reduce(function (acc, current) {\n        return acc && rhs.includes(current);\n      }, true);\n    }\n  }, {\n    key: \"safe\",\n    value: function safe(value, reducer, fallback) {\n      if (value) {\n        return reducer(value);\n      }\n\n      return fallback;\n    }\n  }]);\n\n  return StyleConsumerService;\n}();\n\nexports.StyleConsumerService = StyleConsumerService;","map":{"version":3,"sources":["../../../../../src/components/theme/style/styleConsumer.service.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst style_service_1 = require(\"./style.service\");\nconst SEPARATOR_MAPPING_ENTRY = '.';\nconst DOC_ROOT = 'https://akveo.github.io/react-native-ui-kitten/docs';\nclass StyleConsumerService {\n    constructor(name, style) {\n        this.name = name;\n        this.meta = this.safe(style[name], (generatedConfig) => {\n            return generatedConfig.meta;\n        });\n        if (!this.meta) {\n            const message = [\n                `\\n${this.name}: unsupported configuration.`,\n                'Using UI Kitten components is only possible with configuring ApplicationProvider.',\n                `📖 Documentation: ${DOC_ROOT}/guides/getting-started#manual-installation`,\n                '\\nIn case you have all in place, there might be an incorrect usage of a \"styled\" function.',\n                `📖 Documentation: ${DOC_ROOT}/design-system/custom-component-mapping`,\n            ].join('\\n');\n            console.error(message);\n        }\n    }\n    createDefaultProps() {\n        const appearance = this.getDefaultAppearance();\n        const variants = this.getDefaultVariants();\n        const states = this.getDefaultStates();\n        return { appearance, ...variants, ...states };\n    }\n    createStyleProp(source, style, theme, interaction) {\n        const styleInfo = this.getStyleInfo(source, this.withValidInteraction(interaction));\n        const generatedMapping = this.getGeneratedStyleMapping(style, styleInfo);\n        if (!generatedMapping) {\n            const message = [\n                `${this.name}: unsupported configuration.`,\n                `Check one of the following prop values: ${JSON.stringify(styleInfo, null, 2)}`,\n                `📖 Documentation: ${DOC_ROOT}/components/${this.name.toLowerCase()}/api`,\n            ].join('\\n');\n            console.warn(message);\n            return this.createStyleProp({ ...source, ...this.createDefaultProps() }, style, theme, interaction);\n        }\n        const mapping = this.withValidParameters(generatedMapping);\n        return style_service_1.StyleService.createThemedEntry(mapping, theme);\n    }\n    getGeneratedStyleMapping(style, info) {\n        return this.safe(style[this.name], (componentStyles) => {\n            const styleKeys = Object.keys(componentStyles.styles);\n            const query = this.findGeneratedQuery(info, styleKeys);\n            return componentStyles.styles[query];\n        });\n    }\n    withValidInteraction(interaction) {\n        const validInteractions = interaction.filter((key) => {\n            return Object.keys(this.meta.states).includes(key);\n        });\n        if (validInteractions.length < interaction.length) {\n            const message = [\n                `${this.name}: unsupported configuration.`,\n                `Check one of the following dispatched interactions: ${interaction}`,\n                `📖 Documentation: ${DOC_ROOT}/design-system/custom-component-mapping`,\n            ].join('\\n');\n            console.warn(message);\n        }\n        return validInteractions;\n    }\n    withValidParameters(mapping) {\n        const invalidParameters = [];\n        Object.keys(mapping).forEach((key) => {\n            if (!Object.keys(this.meta.parameters).includes(key)) {\n                invalidParameters.push(key);\n                delete mapping[key];\n            }\n        });\n        if (invalidParameters.length !== 0) {\n            const message = [\n                `${this.name}: unsupported configuration.`,\n                `Unable to apply ${invalidParameters}`,\n                'There might be an incorrect usage of mapping',\n                `📖 Documentation: ${DOC_ROOT}/design-system/custom-component-mapping`,\n            ].join('\\n');\n            console.warn(message);\n        }\n        return mapping;\n    }\n    getStyleInfo(props, interaction) {\n        const variantProps = this.getDerivedVariants(this.meta, props);\n        const stateProps = this.getDerivedStates(this.meta, props);\n        const variants = Object.keys(variantProps).map((variant) => {\n            return variantProps[variant];\n        });\n        const states = Object.keys(stateProps);\n        return {\n            appearance: props.appearance,\n            variants: variants,\n            states: [...states, ...interaction],\n        };\n    }\n    getDefaultAppearance() {\n        const matches = Object.keys(this.meta.appearances).filter((appearance) => {\n            return this.meta.appearances[appearance].default === true;\n        });\n        return matches[matches.length - 1];\n    }\n    getDefaultVariants() {\n        return this.transformObject(this.meta.variantGroups, (variants, group) => {\n            return Object.keys(variants[group]).find((variant) => {\n                return variants[group][variant].default === true;\n            });\n        });\n    }\n    getDefaultStates() {\n        return this.transformObject(this.meta.states, (states, state) => {\n            const isDefault = states[state].default === true;\n            return isDefault ? isDefault : undefined;\n        });\n    }\n    getDerivedVariants(meta, props) {\n        return this.transformObject(props, (p, prop) => {\n            const isVariant = Object.keys(meta.variantGroups).includes(prop);\n            return isVariant ? p[prop] : undefined;\n        });\n    }\n    getDerivedStates(meta, props) {\n        return this.transformObject(props, (p, prop) => {\n            const isState = Object.keys(meta.states).includes(prop);\n            const isAssigned = p[prop] === true;\n            return isState && isAssigned;\n        });\n    }\n    /**\n     * Iterates throw `value` object keys and fills it values with values provided by `transform` callback\n     * If `transform` returns `undefined`, then appends nothing\n     *\n     * @param value (V extends object) - object to transform\n     * @param transform - object key transformation callback\n     */\n    transformObject(value, transform) {\n        return Object.keys(value).reduce((acc, key) => {\n            const nextValue = transform(value, key);\n            return nextValue ? {\n                ...acc,\n                [key]: nextValue,\n            } : acc;\n        }, {});\n    }\n    /**\n     * Finds identical keys across `source` keys array\n     *\n     * Example:\n     *\n     * source = ['default.error.small.checked', ...]\n     * info = { appearance: 'default', variants: ['small', 'error'], states: ['checked'] }\n     *\n     * will return ['default', 'error', 'small', 'checked']\n     *\n     * @param info (StyleInfo) - component style info\n     * @param source (string[]) - array of style keys\n     *\n     * @return (string | undefined) - key identical to some of `source` keys if presents\n     */\n    findGeneratedQuery(info, source) {\n        const query = [\n            info.appearance,\n            ...info.variants,\n            ...info.states,\n        ];\n        const matches = source.filter((key) => {\n            const keyQuery = key.split(SEPARATOR_MAPPING_ENTRY);\n            return this.compareArrays(query, keyQuery);\n        });\n        return matches[0];\n    }\n    /**\n     * @param lhs (string[]) - comparable array\n     * @param rhs (string[]) - comparing array\n     *\n     * @return true if all of lhs keys are included in rhs\n     */\n    compareArrays(lhs, rhs) {\n        if (lhs.length !== rhs.length) {\n            return false;\n        }\n        return lhs.reduce((acc, current) => acc && rhs.includes(current), true);\n    }\n    /**\n     * Safely retrieves R value of T object with reducer\n     *\n     * @param value (T | undefined) - unsafe object which should be processed\n     * @param reducer ((T) => R) - `value` processing lambda. Called if `value` is not `undefined`\n     * @param fallback (R) - fallback value to return. Optional\n     *\n     * @return (R | undefined) - object returned by `reducer` if `value` is not `undefined`, `fallback` otherwise\n     **/\n    safe(value, reducer, fallback) {\n        if (value) {\n            return reducer(value);\n        }\n        return fallback;\n    }\n}\nexports.StyleConsumerService = StyleConsumerService;\n//# sourceMappingURL=styleConsumer.service.js.map"]},"metadata":{},"sourceType":"script"}